<div class="column is-4-mobile is-3-tablet">
  <div class="card recipe" id="recipe-<%= recipe.id %>">
    <div class="card-content">
      <div class="media">
        <figure class="media-left">
          <p class="image is-24x24">
            <%= image_tag recipe.user.user_image.url, class: "is-rounded" %>
          </p>
        </figure>
        <div class="media-content">
          <%= link_to recipe.user.username, user_path(recipe.user),class: "has-text-black-bis" %>
        </div>
        <div class="media-right">
          <div class="dropdown is-right">
            <div class="dropdown-trigger">
              <button class="button is-white is-small" aria-haspopup="true" aria-controls="dropdown-menu">
                <span class="icon is-small">
                  <i class="fa fa-ellipsis-h" aria-hidden="true"></i>
                </span>
              </button>
            </div>
            <div class="dropdown-menu" id="dropdown-menu" role="menu">
              <div class="dropdown-content">
                <% if user_signed_in? && recipe.user.id == current_user.id %>
                  <%= link_to "編集する", edit_recipe_path(recipe), class: "dropdown-item" %>
                  <%= link_to "削除する", recipe_path(recipe), method: :delete, data: {confirm: "削除しますか？"}, class: "dropdown-item" %>
                <% end %>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>

    <div class="card-image">
      <figure class="image is-4by3" id="recipe-image">
        <%= link_to recipe_path(recipe) do %>
          <%= image_tag recipe.recipe_image.url %>
          <div class="mask has-text-centered">
            <p class="has-text-white">
              <span class="icon-text mr-3">
                <span class="icon">
                  <i class="far fa-heart"></i>
                </span>
                <span><%= recipe.favorites.size %></span>
              </span>
              <span class="icon-text">
                <span class="icon">
                  <i class="far fa-comment"></i>
                </span>
                <span><%= recipe.comments.size %></span>
              </span>
            </p>
          </div>
        <% end %>
      </figure>
    </div>
  </div>
</div>
