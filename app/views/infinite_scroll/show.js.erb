var loadingAnimation = document.getElementById('remove-after-loading')

if (loadingAnimation) {
  loadingAnimation.remove();
}

infiniteScrollContainer.insertAdjacentHTML('beforeend', '<%= j(render partial: @file_path, collection: @added_items, as: @local_value) %>')

<% if @added_items.size == @max_added_item_size %>
  infiniteScrollContainer.dataset.infiniteScroll = 'true';

  if (location.pathname === '/' && '<%= !user_signed_in? %>' ) {
    loadingAnimation.dataset.rspec = 'inserted-loading-animation';
  }

  infiniteScrollContainer.insertAdjacentHTML('beforeend', loadingAnimation.outerHTML)
<% end %>
